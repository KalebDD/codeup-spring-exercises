<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<!-- Head -->
<head th:fragment="head">
    <meta charset="UTF-8"/>
    <!-- include stylesheets, etc here -->
    <link th:href="@{/css/bootstrap.min.css}" rel="stylesheet">
    <link th:href="@{/css/custom.css}" rel="stylesheet" type="text/css">
</head>

<body>
<!-- Navbar -->
<nav th:fragment="navbar" class="navbar navbar-default">
    <ul class="nav navbar-nav mr-auto">
        <li><a href="/posts">View Posts</a></li>
        <li><a href="/users/register">Register</a></li>
        <li><a href="/login">Login</a></li>
    </ul>
    <ul class="nav navbar-nav navbar-right userNav">
        <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Profile <span class="caret"></span></a>
            <ul class="dropdown-menu">
                <li><a href="/profile">My Posts</a></li>
                <li><a href="#">My Profile</a></li>
                <li role="separator" class="divider"></li>
                <form th:action="@{/logout}" th:method="post">
                    <button class="btn-link btn btn-warning" style="margin-top: 8px">Logout</button>
                </form>
            </ul>
        </li>
    </ul>
</nav>

<!-- ALl Modal Fragments - Create, Edit, Delete -->
<div th:fragment="allModals">

    <!-- Post Create Modal -->
    <div th:fragment="createModal" class="modal fade" id="createModal" tabindex="-1" role="dialog"
         aria-labelledby="createModalLabel"
         aria-hidden="true">
        <!-- Create Form -->
        <form th:action="@{/posts/create}" th:method="post" th:object="${post}">
            <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 class="modal-title text-center" id="createModalLabel">Create New Post</h2>
                    </div>
                    <div class="modal-body">
                        <h3 class="">Title</h3>
                        <!-- Grab createTitle Here -->
                        <input type="text" class="form-control" th:field="*{title}"/>
                        <h3 class="">Description</h3>
                        <!-- Grab createDescription Here -->
                        <textarea class="form-control" rows="8" th:field="*{description}"></textarea>
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-primary" name="create">Create Post</button>
                        <button type="button" class="btn btn-info" data-dismiss="modal">Cancel</button>
                    </div>
                </div>
            </div>
        </form>
    </div>

    <!-- Post Edit Modal -->
    <div th:fragment="editModal" class="modal fade" id="editModal" tabindex="-1" role="dialog"
         aria-labelledby="editModalLabel"
         aria-hidden="true">
        <!-- Edit Form -->
        <form th:action="@{/posts/edit}" method="post" th:object="${post}">
            <div class="modal-dialog modal-dialog-centered modal-lg">
                <div class="modal-content">
                    <!-- Get ID here from custom.js-->
                    <input type="hidden" id="editPostId" th:field="*{id}"/>
                    <div class="modal-header">
                        <h3 class="modal-title" id="editModalLabel">Edit Title</h3>
                        <!-- Populate title here from custom.js & POST new value (if any) -->
                        <input type="text" class="form-control" id="editPostTitle" th:field="*{title}"/>
                    </div>
                    <div class="modal-body">
                        <h3>Edit Description</h3>
                        <p id="subtext">* 5,000 characters or less</p>
                        <!-- Populate description here from custom.js & POST new value (if any) -->
                        <textarea class="form-control" rows="8" id="editPostDescription"
                                  th:field="*{description}"></textarea>
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-primary">Save Changes</button>
                        <button type="button" class="btn btn-info" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </form>
    </div>

    <!-- Delete Modal -->
    <div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel"
         aria-hidden="true">
        <!-- Delete Form -->
        <form th:action="@{/posts/delete}" method="post" th:object="${post}">
            <div class="modal-dialog">
                <div class="modal-content">
                    <!-- Get ID here from custom.js-->
                    <input type="hidden" name="deletePostId" id="deletePostId"/>
                    <div class="modal-body">
                        <h2 class="modal-title text-center" id="deleteModalLabel">Delete Post</h2>
                        <h4 class="text-center">Are you sure? This action is final.</h4>
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-danger">Delete Post</button>
                        <button type="button" class="btn btn-info" data-dismiss="modal">Cancel</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>

<!-- JS scripts -->
<standard_scripts th:fragment="footer">
    <script th:src="@{/js/jquery-3.5.1.min.js}"></script>
    <script th:src="@{/js/bootstrap.min.js}"></script>
    <script th:src="@{/js/custom.js}"></script>
</standard_scripts>
</body>
</html>